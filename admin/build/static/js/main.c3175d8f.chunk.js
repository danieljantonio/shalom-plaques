(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{244:function(e,t,r){},245:function(e,t,r){},246:function(e,t,r){},422:function(e,t,r){},428:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(42),s=r.n(a),i=(r(244),r(245),r(89)),o=r(27),u=r(5),l=(r(246),r(432)),d=r(158),b=r(30),j=r(12),p=r(26),O="LOGIN_SUCCESS",h="REGISTER_SUCCESS",f=r(63),g=r.n(f),y=r(237),m=function(e){return new Promise((function(t){setTimeout((function(){t(2)}),e)}))},x=function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var r,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat("http://157.230.38.3/api/").concat(t));case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(Object(j.a)().mark((function e(t,r){var n,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat("http://157.230.38.3/api/","/").concat(t),r);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),C=r(230),S=r.n(C),T=r(6),E=l.a.Header,_=l.a.Content,A=l.a.Footer,I=l.a.Sider,w=function(e){var t=e.children,r=e.selectedKey,c=e.title,a=void 0===c?"":c,s=Object(n.useState)(!1),o=Object(u.a)(s,2),O=o[0],h=o[1],f=Object(b.b)();return Object(T.jsxs)(l.a,{className:"layout",style:{minHeight:"100vh"},children:[Object(T.jsxs)(I,{collapsible:!0,collapsed:O,onCollapse:function(){return h(!O)},children:[Object(T.jsx)("div",{className:"logo"}),Object(T.jsxs)(d.a,{theme:"dark",defaultSelectedKeys:["".concat(r)],mode:"inline",children:[Object(T.jsx)(d.a.Item,{children:Object(T.jsx)(i.b,{to:"/",children:"Home"})},"0"),Object(T.jsx)(d.a.Item,{children:Object(T.jsx)(i.b,{to:"/categories",children:"Categories"})},"1"),Object(T.jsx)(d.a.Item,{children:Object(T.jsx)(i.b,{to:"/sub-categories",children:"SubCategories"})},"2"),Object(T.jsx)(d.a.Item,{children:Object(T.jsx)(i.b,{to:"/products",children:"Products"})},"3"),Object(T.jsx)(d.a.Item,{onClick:function(){return f(function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOGOUT"}),e.next=3,m(1e3);case 3:window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"},"4")]})]}),Object(T.jsxs)(l.a,{className:"main-layout",children:[Object(T.jsx)(E,{className:"layout-header",children:Object(T.jsx)(S.a,{children:a})}),Object(T.jsx)(_,{className:"layout-content",children:t}),Object(T.jsx)(A,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})]})},D=(r(422),r(433)),R=r(436),k=r(236),P=r(53),N=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.loader.loading}));return Object(T.jsx)(T.Fragment,{children:t?Object(T.jsx)("h1",{children:"Logging In"}):Object(T.jsxs)(R.a,{name:"basic",initialValues:{remember:!0},onFinish:function(t){var r;e((r=t,function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var n,c,a,s,i,o;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),y.b.loading("Logging in...",1),e.next=5,g.a.post("".concat("http://157.230.38.3/api/","/auth/login"),r);case 5:if(n=e.sent,c=n.data,a=c.status,s=c.token,i=c.user,200===a){e.next=10;break}throw Error("Failed to login");case 10:return o={type:O,user:i,token:s},e.next=13,m(1e3);case 13:t(o),t({type:"LOADING_STOP"}),y.b.success("Welcome ".concat(i.name)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),t({type:"LOGIN_ERROR"}),t({type:"LOADING_STOP"});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()))},autoComplete:"off",children:[Object(T.jsx)(R.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(R.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(T.jsx)(k.a.Password,{})}),Object(T.jsx)(R.a.Item,{children:Object(T.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})},G=function(){var e=Object(b.b)();return Object(T.jsxs)(R.a,{name:"basic",onFinish:function(t){var r;e((r=t,function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var n,c,a,s,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),y.b.loading("Registering...",1),e.next=5,g.a.post("".concat("http://157.230.38.3/api/","/auth/register"),r);case 5:if(n=e.sent,c=n.data,a=c.status,s=c.token,i=c.user,200===a){e.next=10;break}throw Error("Failed to register");case 10:t({type:h,user:i,token:s}),t({type:"LOADING_STOP"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),t({type:"REGISTER_ERROR"}),t({type:"LOADING_STOP"});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()))},autoComplete:"off",children:[Object(T.jsx)(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}],children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(R.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(R.a.Item,{label:"Phone Number",name:"phone",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(T.jsx)(k.a,{})}),Object(T.jsx)(R.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(T.jsx)(k.a.Password,{})}),Object(T.jsx)(R.a.Item,{children:Object(T.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},L=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),r=t[0],c=t[1];return Object(T.jsx)("div",{className:"auth-page",children:Object(T.jsxs)("div",{className:"card-container",children:[r?Object(T.jsx)(N,{}):Object(T.jsx)(G,{}),Object(T.jsx)(D.a,{}),r?Object(T.jsxs)("p",{className:"auth-navigation",children:["Don't have an account?"," ",Object(T.jsx)("span",{className:"auth-navigate",onClick:function(){return c(!1)},children:"Register Here"})]}):Object(T.jsxs)("p",{className:"auth-navigation",children:["Have an account?"," ",Object(T.jsx)("span",{className:"auth-navigate",onClick:function(){return c(!0)},children:"Login Here"})]})]})})},F=r(438),U=r(441),q=r(439),B=function(e){var t=e.title,r=e.visible,n=e.toggleDrawer,c=e.children,a=function(){n(!1)};return Object(T.jsx)("div",{children:Object(T.jsx)(q.a,{destroyOnClose:!0,title:"Add New ".concat(t),visible:r,width:520,onClose:a,extra:Object(T.jsx)(U.b,{children:Object(T.jsx)(P.a,{onClick:a,children:"Cancel"})}),children:c})})},Y=r(434),H=function(e){var t=e.columns,r=e.data;return Object(T.jsx)(Y.a,{columns:t,dataSource:r})},K="GET_CATEGORIES_SUCCESS",M="CREATE_CATEGORY_SUCCESS",z="DELETE_CATEGORY_SUCCESS",V=function(){return function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var r,n,c;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,g.a.get("".concat("http://157.230.38.3/api/","/category"));case 4:r=e.sent,n=r.data,c=n.categories,t({type:K,categories:c}),t({type:"LOADING_STOP"}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"GET_CATEGORIES_ERROR"}),t({type:"LOADING_STOP"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(p.a)(Object(j.a)().mark((function t(r){var n,c,a;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"LOADING_START"}),y.b.success("Product deleted",1),t.next=5,g.a.delete("".concat("http://157.230.38.3/api/","/category/").concat(e));case 5:n=t.sent,c=n.data,a={type:z,categories:c.categories},r(a),r({type:"LOADING_STOP"}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),r({type:"LOADING_STOP"}),r({type:"DELETE_CATEGORY_ERROR"}),y.b.error("Failed to delete product",1);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e){var t=e.onFinish;return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(R.a,{autoComplete:"off",onFinish:function(e){t(e)},children:[Object(T.jsx)(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Name required"}],children:Object(T.jsx)(k.a,{allowClear:!0})},"1"),Object(T.jsx)(R.a.Item,{children:Object(T.jsx)(P.a,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})})},Q=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.category.categories})),r=Object(b.c)((function(e){return e.loader.isLoading})),c=Object(n.useState)(!1),a=Object(u.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),d=l[0],O=l[1],h=F.a.useModal(),f=Object(u.a)(h,2),g=f[0],m=f[1];Object(n.useEffect)((function(){e(V()),C()}),[]),Object(n.useEffect)((function(){C()}),[t]);var x=[{title:"Category",dataIndex:"category",key:"category",sorter:function(e,t){return e.category.length-t.category.length},sortDirections:["ascend","descend"]},{title:"Sub Categories",dataIndex:"subcategory",key:"subcat",sorter:function(e,t){return e.subcategory-t.subcategory},sortDirections:["ascend","descend"]},{title:"Actions",key:"action",render:function(t,r){return Object(T.jsx)(U.b,{size:"middle",children:Object(T.jsx)(P.a,{type:"primary",danger:!0,onClick:function(){return g.confirm((t=r.category,n=r.key,{title:"Delete ".concat(t),content:"This will remove all sub categories and products under this category. Are you sure you want to delete ".concat(t,"?"),onOk:function(){var t=Object(p.a)(Object(j.a)().mark((function t(){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(J(n));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}));var t,n},children:"Delete"})})}}],C=function(){var e=Object(p.a)(Object(j.a)().mark((function e(){var r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map((function(e){return{category:e.name,subcategory:e.subCategories.length||0,key:e._id}}));case 2:r=e.sent,O(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{marginBottom:"0.5rem",width:"100%",height:"3rem"},children:Object(T.jsx)(P.a,{style:{float:"right"},type:"primary",onClick:function(){return i(!0)},children:"New Category"})}),r?Object(T.jsx)("div",{children:"Loading"}):Object(T.jsx)(H,{columns:x,data:d}),Object(T.jsx)(B,{title:"Category",visible:s,toggleDrawer:function(e){return i(e)},children:Object(T.jsx)(W,{onFinish:function(t){var r;e((r=t,function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var n,c,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,v("/category",r);case 4:n=e.sent,c=n.newCategory,a=n.categories,t({type:M,category:c,categories:a}),y.b.success("Category ".concat(c.name," created"),1),t({type:"LOADING_STOP"}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),y.b.error("Failed to create category ".concat(r.name),1),t({type:"CREATE_CATEGORY_ERROR"}),t({type:"LOADING_STOP"});case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())),i(!1)}})}),m]})},X=r(440),Z=X.a.Step,$=function(){return Object(T.jsx)("div",{children:Object(T.jsxs)(X.a,{direction:"vertical",size:"small",current:3,children:[Object(T.jsx)(Z,{title:"Add Category",description:"Add a new category"}),Object(T.jsx)(Z,{title:"Add SubCategory",description:"Add a new subcategory for a selected category"}),Object(T.jsx)(Z,{title:"Add Product",description:"Add a new product for a selected subcategory from a selected category"})]})})},ee=function(e){var t=e.title,r=e.visible,n=e.toggleDrawer,c=e.children,a=function(){n(!1)};return Object(T.jsx)("div",{children:Object(T.jsx)(q.a,{placement:"bottom",destroyOnClose:!0,title:"".concat(t),visible:r,height:"70%",onClose:a,extra:Object(T.jsx)(U.b,{children:Object(T.jsx)(P.a,{onClick:a,children:"Cancel"})}),children:c})})},te=r(151),re="GET_PRODUCTS_SUCCESS",ne="GET_PRODUCTS_ERROR",ce="GET_PRODUCT_SUCCESS",ae="GET_PRODUCT_ERROR",se="CREATE_PRODUCT_SUCCESS",ie="CREATE_PRODUCT_ERROR",oe="DELETE_PRODUCTS_SUCCESS",ue="DELETE_PRODUCTS_ERROR",le=function(e){return function(){var t=Object(p.a)(Object(j.a)().mark((function t(r){var n,c,a;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"LOADING_START"}),y.b.success("Product deleted",1),t.next=5,g.a.delete("".concat("http://157.230.38.3/api/","/product/").concat(e));case 5:n=t.sent,c=n.data,a={type:oe,products:c.products},r(a),r({type:"LOADING_STOP"}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),r({type:"LOADING_STOP"}),y.b.error("Failed to delete product",1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},de=r(2),be=r(127),je=r(435),pe="GET_SUBCATEGORIES_SUCCESS",Oe="CREATE_SUBCATEGORY_SUCCESS",he="DELETE_SUBCATEGORY_SUCCESS",fe=function(){return function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var r,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,x("/subcategory");case 4:r=e.sent,n=r.subCategories,t({type:pe,subCategories:n}),t({type:"LOADING_STOP"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:"GET_SUBCATEGORIES_ERROR"}),t({type:"LOADING_STOP"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(p.a)(Object(j.a)().mark((function t(r){var n,c,a;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"LOADING_START"}),y.b.success("Product deleted",1),t.next=5,g.a.delete("".concat("http://157.230.38.3/api/","/subcategory/").concat(e));case 5:n=t.sent,c=n.data,a={type:he,subCategories:c.subCategories},r(a),r({type:"LOADING_STOP"}),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),r({type:"LOADING_STOP"}),r({type:"DELETE_SUBCATEGORY_ERROR"}),console.log(t.t0),y.b.error("Failed to delete product",1);case 18:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},ye=r(442),me=r(121),xe=r.n(me),ve=be.a.Option,Ce=function(e){var t=e.onFinish,r=Object(b.c)((function(e){return e.category.categories})),c=(Object(b.c)((function(e){return e.subcategory.subCategories})),Object(b.b)()),a=Object(n.useState)([]),s=Object(u.a)(a,2),i=s[0],o=s[1];Object(n.useEffect)((function(){c(V()),c(fe())}),[]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(R.a,{autoComplete:"off",onFinish:function(e){return e.category?e.subCategory?void t(e):y.b.error("Please select the product's subCategory",1):y.b.error("Please select the product's category",1)},encType:"multipart/form-data",children:[Object(T.jsx)(R.a.Item,{label:"Series",name:"series",rules:[{required:!0,message:"Series required"}],children:Object(T.jsx)(k.a,{})},"1"),Object(T.jsx)(R.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Description required"}],children:Object(T.jsx)(xe.a,{})},"2"),Object(T.jsx)(R.a.Item,{label:"Category",name:"category",required:!0,children:Object(T.jsx)(be.a,{placeholder:"Select the parent category",onChange:function(e){var t=r.filter((function(t){return t._id===e}))[0];o(t.subCategories)},children:r.map((function(e,t){return Object(T.jsx)(ve,{value:e._id,children:e.name},t)}))})},"3"),Object(T.jsx)(R.a.Item,{label:"SubCategory",name:"subCategory",required:!0,children:Object(T.jsx)(be.a,{placeholder:"Select the parent category",value:null,children:i.map((function(e,t){return Object(T.jsx)(ve,{value:e._id,children:e.name},t)}))})},"4"),Object(T.jsx)(R.a.Item,{label:"Dragger",name:"images",children:Object(T.jsxs)(je.a.Dragger,Object(de.a)(Object(de.a)({},{name:"file",multiple:!0,accept:"image/png, image/jpg, image/jpeg",listType:"picture",customRequest:function(e){try{var t=e.onSuccess;(void 0===t?function(e){}:t)("ok")}catch(r){}}}),{},{children:[Object(T.jsx)("p",{className:"ant-upload-drag-icon",children:Object(T.jsx)(ye.a,{})}),Object(T.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(T.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload."})]}))}),Object(T.jsx)(R.a.Item,{children:Object(T.jsx)(P.a,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})})},Se=r(437),Te=r(83),Ee=r(232),_e=function(e){var t=e.productId,r=Object(b.b)(),c=Object(b.c)((function(e){return e.product.product})),a=Object(b.c)((function(e){return e.loader.loading}));return Object(n.useEffect)((function(){r(function(e){return function(){var t=Object(p.a)(Object(j.a)().mark((function t(r){var n,c;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"LOADING_START"}),t.next=4,x("/product/".concat(e));case 4:n=t.sent,c=n.product,r({type:ce,product:c}),r({type:"LOADING_STOP"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:ae}),r({type:"LOADING_STOP"});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]),Object(T.jsx)("div",{children:a?Object(T.jsx)(Ee.a,{}):Object(T.jsxs)("div",{children:[Object(T.jsxs)(R.a,{children:[Object(T.jsx)(R.a.Item,{label:"Product Name",children:Object(T.jsx)(k.a,{defaultValue:c.series,disabled:!0})}),Object(T.jsx)(R.a.Item,{label:"Product Description",children:Object(T.jsx)(xe.a,{rows:3,defaultValue:c.description,disabled:!0})}),Object(T.jsx)(R.a.Item,{label:"Product Category",children:Object(T.jsx)(k.a,{defaultValue:c.category.name,disabled:!0})}),Object(T.jsx)(R.a.Item,{label:"Product SubCategory",children:Object(T.jsx)(k.a,{defaultValue:c.subCategory.name,disabled:!0})})]}),Object(T.jsx)(R.a,{layout:"vertical",children:Object(T.jsx)(R.a.Item,{label:"Product Images:",children:c&&c.images.length>0?Object(T.jsx)(U.b,{size:"large",children:c.images.map((function(e){return Object(T.jsx)(Se.a,{width:100,src:"".concat("http://157.230.38.3/api/","/").concat(e)})}))}):Object(T.jsx)(Te.a,{style:{border:"1px solid grey",borderRadius:5,padding:30},image:Te.a.PRESENTED_IMAGE_SIMPLE,description:Object(T.jsx)("span",{children:"No image found"})})})})]})})},Ae=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.product.products})),r=Object(b.c)((function(e){return e.loader.isLoading})),c=Object(n.useState)([]),a=Object(u.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),d=l[0],O=l[1],h=Object(n.useState)(!1),f=Object(u.a)(h,2),m=f[0],v=f[1],C=Object(n.useState)(""),S=Object(u.a)(C,2),E=S[0],_=S[1],A=F.a.useModal(),I=Object(u.a)(A,2),w=I[0],D=I[1];Object(n.useEffect)((function(){e(function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var r,n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,x("/product");case 4:r=e.sent,n=r.products,t({type:re,products:n}),t({type:"LOADING_STOP"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:ne}),t({type:"LOADING_STOP"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){k()}),[t]);var R=[{title:"Series",dataIndex:"series",key:"series",sorter:function(e,t){return e.series.length-t.series.length},sortDirections:["ascend","descend"]},{title:"Description",dataIndex:"description",key:"description",sorter:function(e,t){return e.description.length-t.description.length},sortDirections:["ascend","descend"]},{title:"Category",dataIndex:"category",key:"category",sorter:function(e,t){return e.category.length-t.category.length},sortDirections:["ascend","descend"]},{title:"SubCategory",dataIndex:"subcategory",key:"subcategory",sorter:function(e,t){return e.subcategory.length-t.subcategory.length},sortDirections:["ascend","descend"]},{title:"Images",dataIndex:"images",key:"images"},{title:"Actions",key:"action",render:function(t,r){return Object(T.jsxs)(U.b,{size:"middle",children:[Object(T.jsx)(P.a,{type:"primary",onClick:function(){return N(r.key)},children:"Details"}),Object(T.jsx)(P.a,{type:"primary",danger:!0,onClick:function(){return w.confirm((t=r.series,n=r.key,{title:"Delete ".concat(t),content:"Are you sure you want to delete ".concat(t,"?"),onOk:function(){var t=Object(p.a)(Object(j.a)().mark((function t(){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(le(n));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}));var t,n},children:"Delete"})]})}}],k=function(){var e=Object(p.a)(Object(j.a)().mark((function e(){var r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map((function(e){return{series:e.series,description:e.description,category:e.category.name,subcategory:e.subCategory.name,images:e.images.length,key:e._id}}));case 2:r=e.sent,i(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){v(!0),_(e)};return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{marginBottom:"0.5rem",width:"100%",height:"3rem"},children:Object(T.jsx)(P.a,{style:{float:"right"},type:"primary",onClick:function(){return O(!0)},children:"New Product"})}),r?Object(T.jsx)("div",{children:"Loading"}):Object(T.jsx)(H,{columns:R,data:s}),Object(T.jsx)(B,{title:"Product",visible:d,toggleDrawer:function(e){return O(e)},children:Object(T.jsx)(Ce,{onFinish:function(t){var r;e((r=t,function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var n,c,a,s,i,o,u,l,d;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t({type:"LOADING_START"}),(a=new FormData).append("series",r.series),a.append("description",r.description),a.append("category",r.category),a.append("subCategory",r.subCategory),r.images&&(null===(n=r.images)||void 0===n||null===(c=n.fileList)||void 0===c?void 0:c.length)>0){s=Object(te.a)(r.images.fileList);try{for(s.s();!(i=s.n()).done;)o=i.value,a.append("file",o.originFileObj)}catch(b){s.e(b)}finally{s.f()}}return e.next=10,g.a.post("".concat("http://157.230.38.3/api/","/product"),a,{headers:{"Content-Type":"multipart/form-data"}});case 10:u=e.sent,l=u.data,d={type:se,products:l.products},t(d),y.b.success("Product ".concat(r.series," created")),t({type:"LOADING_STOP"}),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),y.b.error("Failed to create product ".concat(r.series),1),t({type:ie}),t({type:"LOADING_STOP"});case 23:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}())),O(!1)}})}),Object(T.jsx)(ee,{title:"Product",visible:m,toggleDrawer:function(e){return v(e)},children:Object(T.jsx)(_e,{productId:E})}),D]})},Ie=be.a.Option,we=function(e){var t=e.onFinish,r=Object(b.c)((function(e){return e.category.categories})),c=Object(b.b)();Object(n.useEffect)((function(){c(V())}),[]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(R.a,{autoComplete:"off",onFinish:function(e){if(!e.category)return y.b.error("Please select the product's category",1);t(e)},children:[Object(T.jsx)(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Name required"}],children:Object(T.jsx)(k.a,{allowClear:!0})},"1"),Object(T.jsx)(R.a.Item,{label:"Parent Category",name:"category",required:!0,children:Object(T.jsx)(be.a,{placeholder:"Select the parent category",allowClear:!0,children:r.map((function(e,t){return Object(T.jsx)(Ie,{value:e._id,children:e.name},t)}))})},"2"),Object(T.jsx)(R.a.Item,{children:Object(T.jsx)(P.a,{type:"primary",htmlType:"submit",style:{float:"right"},children:"Create"})})]})})},De=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.subcategory.subCategories})),r=Object(b.c)((function(e){return e.loader.isLoading})),c=Object(n.useState)([]),a=Object(u.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),d=l[0],O=l[1],h=F.a.useModal(),f=Object(u.a)(h,2),g=f[0],m=f[1];Object(n.useEffect)((function(){e(fe()),C()}),[]),Object(n.useEffect)((function(){C()}),[t]);var x=[{title:"Sub Category",dataIndex:"title",key:"subcategory",sorter:function(e,t){return e.title.length-t.title.length},sortDirections:["ascend","descend"]},{title:"Products",dataIndex:"products",key:"products",sorter:function(e,t){return e.products-t.products},sortDirections:["ascend","descend"]},{title:"Actions",key:"action",render:function(t,r){return Object(T.jsx)(U.b,{size:"middle",children:Object(T.jsx)(P.a,{type:"primary",danger:!0,onClick:function(){return g.confirm((t=r.title,n=r.key,{title:"Delete ".concat(t),content:"This will remove all products under this sub category. Are you sure you want to delete ".concat(t,"?"),onOk:function(){var t=Object(p.a)(Object(j.a)().mark((function t(){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(ge(n));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}));var t,n},children:"Delete"})})}}],C=function(){var e=Object(p.a)(Object(j.a)().mark((function e(){var r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map((function(e){return{title:e.name,products:e.products.length,key:e._id}}));case 2:r=e.sent,i(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{style:{marginBottom:"0.5rem",width:"100%",height:"3rem"},children:Object(T.jsx)(P.a,{style:{float:"right"},type:"primary",onClick:function(){return O(!0)},children:"New SubCategory"})}),r?Object(T.jsx)("div",{children:"Loading"}):Object(T.jsx)(H,{columns:x,data:s}),Object(T.jsx)(B,{title:"SubCategory",visible:d,toggleDrawer:function(e){return O(e)},children:Object(T.jsx)(we,{onFinish:function(t){var r;e((r=t,function(){var e=Object(p.a)(Object(j.a)().mark((function e(t){var n,c,a;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,v("/subcategory",r);case 4:n=e.sent,c=n.subCategory,a=n.subCategories,t({type:Oe,subCategory:c,subCategories:a}),y.b.success("Sub Category ".concat(r.name," created"),1),t({type:"LOADING_STOP"}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),y.b.error("Failed to create subcategory ".concat(r.name),1),t({type:"CREATE_SUBCATEGORY_ERROR"}),t({type:"LOADING_STOP"});case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())),O(!1)}})}),m]})},Re=[{component:Object(T.jsx)(L,{}),path:"/",requireAuth:!1}],ke=[{component:Object(T.jsx)($,{}),path:"/",requireAuth:!0,title:"Home"},{component:Object(T.jsx)(Q,{}),path:"/categories",requireAuth:!0,selectedKey:"1",title:"Categories"},{component:Object(T.jsx)(De,{}),path:"/sub-categories",requireAuth:!0,selectedKey:"2",title:"SubCategories"},{component:Object(T.jsx)(Ae,{}),path:"/products",requireAuth:!0,selectedKey:"3",title:"Products"}],Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t?Object(T.jsx)(w,{selectedKey:r,title:n,children:e}):e},Ne=function(e){return e?ke.map((function(e,t){var r=e.path,n=e.component,c=e.requireAuth,a=e.selectedKey,s=e.title;return Object(T.jsx)(o.a,{path:r,element:Pe(n,c,a,s)},t)})):Re.map((function(e,t){var r=e.path,n=e.component;return Object(T.jsx)(o.a,{path:r,element:Pe(n)},t)}))},Ge=function(){var e=Object(b.c)((function(e){return e.user.isAuthenticated}));return Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(i.a,{basename:"/",children:[" ",Object(T.jsx)(o.c,{children:Ne(e).map((function(e){return e}))})]})})},Le=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,443)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},Fe=r(108),Ue={category:{_id:"",name:"",subCategories:[]},categories:[]},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:case M:case z:return Object(de.a)(Object(de.a)({},e),{},{categories:t.categories});default:return e}},Be={subCategory:{_id:"",name:"",products:[]},subCategories:[]},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:case Oe:case he:return Object(de.a)(Object(de.a)({},e),{},{subCategories:t.subCategories});default:return e}},He="LOADING_START",Ke="LOADING_STOP",Me={loading:!1},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return{loading:!0};case Ke:return{loading:!1};default:return e}},Ve=localStorage.getItem("__at"),Je=function(e){return localStorage.setItem("__at",e)},We=function(){return localStorage.removeItem("__at")},Qe={email:"daniel@email.com",id:"asdf34109s",name:"Daniel Antonio"},Xe={user:{},isAuthenticated:null!==Ve},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case h:return Je("asdf"),Object(de.a)(Object(de.a)({},e),{},{isAuthenticated:!0,user:Qe});case"LOGOUT":return We(),e;default:return e}},$e={product:{_id:"",series:"",description:"",images:[],category:{name:""},subCategory:{name:""}},products:[]},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(de.a)(Object(de.a)({},e),{},{products:t.products});case ne:return Object(de.a)(Object(de.a)({},e),{},{products:[]});case ce:return Object(de.a)(Object(de.a)({},e),{},{product:t.product});case ae:return Object(de.a)(Object(de.a)({},e),{},{product:$e.product});case se:return Object(de.a)(Object(de.a)({},e),{},{products:t.products});case ie:return Object(de.a)({},e);case oe:return Object(de.a)(Object(de.a)({},e),{},{products:t.products});case ue:return Object(de.a)({},e);default:return e}},tt=Object(Fe.combineReducers)({user:Ze,loader:ze,category:qe,subcategory:Ye,product:et}),rt=r(235),nt=r(234),ct=Object(Fe.createStore)(tt,Object(nt.composeWithDevTools)(Object(Fe.applyMiddleware)(rt.a)));s.a.render(Object(T.jsx)(b.a,{store:ct,children:Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(Ge,{})})}),document.getElementById("root")),Le()}},[[428,1,2]]]);
//# sourceMappingURL=main.c3175d8f.chunk.js.map